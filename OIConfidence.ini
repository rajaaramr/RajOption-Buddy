; ============================
; OIConfidence.ini  (standalone config for OI pillar)
; ============================

[confidence]
; timeframes we will produce from a 15m base
tfs = 15m,30m,60m,120m
; weights for the OI-only MTF blend (these are NOT the global composite weights)
mtf_oi_weights = 15m:0.15,30m:0.25,60m:0.30,120m:0.30
; MTF alignment gate and conflict cap
mtf_align_gate = 0.60
mtf_conflict_cap = 0.60

; choose how OI tilts baseline probability
oi_integration = bayes          ; additive | bayes
bayes_k = 0.50                  ; +k to logit if OI direction is bullish (−k if bearish)
bayes_m = 0.75                  ; persistence multiplier (signed)

; if you DON'T want to read baseline CONF from indicators.values set this to false
use_baseline_conf = true

; dynamic weighting by regime
dyn_w_enable = true
dyn_w_fast_bias = 0.10
dyn_w_slow_bias = 0.10
dyn_ref_tf     = 60m

; lookback span for intraday 15m bars
lookback_days = 120

[oi]
; feature windows / thresholds
window          = 20
persistence_min = 0.60
voi_eff_min     = 0.05
oi_turnover_low = 0.10
oi_turnover_high= 1.20
roll_dampen     = 0.50
basis_confirm   = 1
squeeze_bw_pct  = 20.0

; roll detection aides (applied softly via quality)
roll_pdrop = 0.30
roll_z     = 2.0

[datasource]
; where to read data from
; 15m bars (OHLCV+OI) — Zerodha feed you mentioned
futures_candles_table = market.futures_candles
spot_candles_table    = market.spot_candles
base_interval         = 15m

; daily options rollups (both are optional)
; 1) per-contract chain → derivatives.option_chain  (latest per trade_date)
option_chain_table    = derivatives.option_chain

; 2) Trendlyne daily F&O aggregates → raw_ingest.fo_daily_unified
fo_daily_table        = raw_ingest.fo_daily_unified

[write]
run_id = conf_oi_run
source = conf_oi_v2

; -------- optional per-symbol overrides ----------
; [oi.symbol:RELIANCE]
; bayes_k = 0.35
; bayes_m = 0.90
; oi_turnover_low  = 0.08
; oi_turnover_high = 1.40
; basis_confirm    = 0

; [confidence.symbol:RELIANCE]
; tfs = 15m,30m,60m
; mtf_oi_weights = 15m:0.25,30m:0.35,60m:0.40
