[risk]
rules_mode=additive
clamp_low=0
clamp_high=100
write_scenarios_debug=false
min_bars=120

# Parameters
hard_pos_frac=0.05              ; If >5% capital deployed → veto
atr_pct_thresh=8.0              ; Too high ATR → penalty
vol_cv_thresh=1.5               ; Unstable volume
illiquid_rvol=0.3               ; Too low liquidity

[risk_scenarios]
list = size_hard_veto, squeeze_bonus_extra, 
       high_atr_penalty, vol_noise_penalty, illiquid_veto, 
       wide_spread_veto, weekend_risk_penalty, 
       no_clear_trend_penalty

[risk_scenario.size_hard_veto]
when = (pos_frac > hard_pos_frac)
score = -20
set_veto = true

[risk_scenario.squeeze_bonus_extra]
when = (squeeze_rank <= 10) and (near_poc == True)
score = +3

[risk_scenario.high_atr_penalty]
when = (atr_pct >= atr_pct_thresh)
score = -10

[risk_scenario.vol_noise_penalty]
when = (vol_cv20 > vol_cv_thresh)
score = -10

[risk_scenario.illiquid_veto]
when = (rvol_now < illiquid_rvol)
score = -15
set_veto = true

[risk_scenario.wide_spread_veto]
when = (spread_bps > 50.0)
score = -15
set_veto = true

[risk_scenario.weekend_risk_penalty]
when = (is_friday == True)
score = -5

[risk_scenario.no_clear_trend_penalty]
when = (ema10 > ema50) and (ema20 < ema50)
score = -10
